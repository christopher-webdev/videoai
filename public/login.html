<!DOCTYPE html>
<html lang="en">
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="theme-style-mode" content="1" />

        <title>Sign In</title>
        <!-- Favicon -->
        <link
            rel="shortcut icon"
            type="image/x-icon"
            href="assets/images/logo/favicon.png"
        />
        <!-- CSS ============================================ -->
        <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css" />
        <link
            rel="stylesheet"
            href="assets/css/plugins/fontawesome-all.min.css"
        />
        <link rel="stylesheet" href="assets/css/plugins/feature.css" />
        <link rel="stylesheet" href="assets/css/plugins/animation.css" />
        <link rel="stylesheet" href="assets/css/plugins/slick.css" />
        <link rel="stylesheet" href="assets/css/plugins/slick-theme.css" />
        <link
            rel="stylesheet"
            href="assets/css/plugins/bootstrap-select.min.css"
        />
        <link rel="stylesheet" href="assets/css/plugins/prism.css" />
        <link rel="stylesheet" href="assets/css/style.css" />
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    </head>

    <body>
        <main class="page-wrapper">
            <!-- Start Sign up Area  -->
            <div class="signup-area">
                <div class="wrapper" align="center">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12 bg-color-blackest">
                                <div class="sign-up-box">
                                    <div class="signup-box-top">
                                        <img
                                            src="assets/images/logo/logo.png"
                                            alt="sign-up logo"
                                        />
                                    </div>
                                    <div class="signup-box-bottom">
                                        <div class="signup-box-content">
                                            <div class="social-btn-grp">
                                                <a
                                                    class="btn-default btn-border"
                                                    href="/auth/google"
                                                >
                                                    <span class="icon-left"
                                                        ><img
                                                            src="assets/images/sign-up/google.png"
                                                            alt="Google Icon" /></span
                                                    >Login with Google
                                                </a>
                                                <a
                                                    class="btn-default btn-border"
                                                    href="/auth/twitter"
                                                >
                                                    <span class="icon-left"
                                                        ><img
                                                        width="150"
                                                            src="assets/images/sign-up/twitter.png"
                                                            alt="Google Icon" /></span
                                                    >Login with Twitter
                                                </a>
                                                <!-- <a class="btn-default btn-border" href="/auth/facebook">
                                            <span class="icon-left"><img src="assets/images/sign-up/facebook.png" alt="Google Icon"></span>Login with Facebook
                                        </a> -->
                                            </div>
                                            <div class="text-social-area">
                                                <hr />
                                                <span>Or continue with</span>
                                                <hr />
                                            </div>
                                            <form id="login-form">
                                                <div
                                                    class="input-section mail-section"
                                                >
                                                    <div class="icon">
                                                        <i
                                                            class="fa-sharp fa-regular fa-envelope"
                                                        ></i>
                                                    </div>
                                                    <input
                                                        type="email"
                                                        id="email"
                                                        name="email"
                                                        placeholder="Enter email address"
                                                        required
                                                    />
                                                </div>
                                                <div
                                                    class="input-section password-section"
                                                >
                                                    <div class="icon">
                                                        <i
                                                            class="fa-sharp fa-regular fa-lock"
                                                        ></i>
                                                    </div>
                                                    <input
                                                        type="password"
                                                        id="password"
                                                        name="password"
                                                        placeholder="Password"
                                                        required
                                                    />
                                                </div>
                                                <div class="forget-text">
                                                    <a
                                                        class="btn-read-more"
                                                        href="forgot-password.html"
                                                        ><span
                                                            >Forgot
                                                            password</span
                                                        ></a
                                                    >
                                                </div>
                                                <button
                                                    type="submit"
                                                    class="btn-default"
                                                >
                                                    Sign In
                                                </button>
                                            </form>
                                            <div
                                                id="errorMessage"
                                                style="
                                                    display: none;
                                                    color: red;
                                                "
                                            ></div>
                                            <div class="signup-box-footer">
                                                <div class="bottom-text">
                                                    Don't have an account?
                                                    <a
                                                        class="btn-read-more ml--5"
                                                        href="signup.html"
                                                        ><span>Sign Up</span></a
                                                    >
                                                </div>
                                            </div>
                                            <a
                                                class="close-button"
                                                href="index.html"
                                            >
                                                <i
                                                    class="fa-sharp fa-regular fa-x"
                                                ></i>
                                            </a>

                                            <!-- End Sign up Area  -->

                                            <!-- All Scripts  -->
                                            <div class="rbt-progress-parent">
                                                <svg
                                                    class="rbt-back-circle svg-inner"
                                                    width="100%"
                                                    height="100%"
                                                    viewBox="-1 -1 102 102"
                                                >
                                                    <path
                                                        d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"
                                                    />
                                                </svg>
                                            </div>

                                            <!-- JS
============================================ -->
                                            <script src="assets/js/vendor/modernizr.min.js"></script>
                                            <script src="assets/js/vendor/jquery.min.js"></script>
                                            <script src="assets/js/vendor/bootstrap.min.js"></script>
                                            <script src="assets/js/vendor/waypoint.min.js"></script>
                                            <script src="assets/js/vendor/wow.min.js"></script>
                                            <script src="assets/js/vendor/counterup.min.js"></script>
                                            <script src="assets/js/vendor/sal.min.js"></script>
                                            <script src="assets/js/vendor/slick.min.js"></script>
                                            <script src="assets/js/vendor/text-type.js"></script>
                                            <script src="assets/js/vendor/prism.js"></script>
                                            <script src="assets/js/vendor/jquery.style.swicher.js"></script>
                                            <script src="assets/js/vendor/bootstrap-select.min.js"></script>
                                            <script src="assets/js/vendor/backto-top.js"></script>

                                            <script src="assets/js/vendor/js.cookie.js"></script>
                                            <script src="assets/js/vendor/jquery-one-page-nav.js"></script>
                                            <!-- Main JS -->
                                            <script src="assets/js/main.js"></script>
                                            <script>
                                                document.addEventListener(
                                                    'DOMContentLoaded',
                                                    () => {
                                                        document
                                                            .getElementById(
                                                                'login-form'
                                                            )
                                                            .addEventListener(
                                                                'submit',
                                                                async (e) => {
                                                                    e.preventDefault();
                                                                    const email =
                                                                        document.getElementById(
                                                                            'email'
                                                                        ).value;
                                                                    const password =
                                                                        document.getElementById(
                                                                            'password'
                                                                        ).value;

                                                                    try {
                                                                        const response =
                                                                            await axios.post(
                                                                                '/auth/login',
                                                                                {
                                                                                    email,
                                                                                    password,
                                                                                }
                                                                            );

                                                                        console.log(
                                                                            'Server response:',
                                                                            response.data
                                                                        );

                                                                        if (
                                                                            response.status ===
                                                                            200
                                                                        ) {
                                                                            // Redirect to dashboard
                                                                            window.location.href =
                                                                                '/dashboard';
                                                                        }
                                                                    } catch (error) {
                                                                        console.error(
                                                                            'Error:',
                                                                            error
                                                                        );
                                                                        const errorMessage =
                                                                            error
                                                                                .response
                                                                                ?.data
                                                                                ?.message ||
                                                                            'An error occurred. Please try again.';
                                                                        document.getElementById(
                                                                            'errorMessage'
                                                                        ).innerText =
                                                                            errorMessage;
                                                                        document.getElementById(
                                                                            'errorMessage'
                                                                        ).style.display =
                                                                            'block';
                                                                    }
                                                                }
                                                            );
                                                    }
                                                );
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>
